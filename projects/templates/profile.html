{% extends 'base.html' %}
{% load static %}

{% block title %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å{% endblock %}

{% block content %}

<header class="navbar">
    <a href="{% url 'projects:index' %}" class="logo-link">
        <img src="{% static 'Image/s.png' %}" alt="s" class="stakeup">
    </a>
    <a href="{% url 'projects:about' %}">–ì–ª–∞–≤–Ω–∞—è</a>
    <a href="{% url 'projects:projects_list' %}">–ü—Ä–æ–µ–∫—Ç—ã</a>
    <a href="{% url 'projects:create_project' %}">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</a>
    <a href="{% url 'projects:logout' %}" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')">–í—ã—Ö–æ–¥</a>
</header>

<div class="page profile-page">
    <div class="profile-container">
        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –∞–≤–∞—Ç–∞—Ä + –¥–∞–Ω–Ω—ã–µ -->
        <div class="profile-main">
            <!-- –ê–≤–∞—Ç–∞—Ä -->
            <div class="profile-avatar">
                {% if user.avatar %}
                    <img src="{{ user.avatar }}" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar-img">
                {% else %}
                    <img src="{% static 'Image/avatar.png' %}" alt="–ê–≤–∞—Ç–∞—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é" class="avatar-img">
                {% endif %}
            </div>

            <!-- –ò–º—è –∏ —Å—Ç–∞—Ç—É—Å -->
            <h1 class="profile-name">
                {{ user.first_name }} {{ user.last_name }}
            </h1>
            <p class="profile-status">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</p>

            <div class="profile-info">
                <div class="info-row">
                    <span class="info-label">üìß Email:</span>
                    <span class="info-value">
                    {% if user.email %}
                        {{ user.email }}
                    {% else %}
                        ‚Äî –Ω–µ —É–∫–∞–∑–∞–Ω
                    {% endif %}
                    </span>
                </div>
                <div class="info-row">
                    <span class="info-label">üìÖ –ù–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ —Å:</span>
                    <span class="info-value">{{ user.date_joined|date:"d E Y" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üéÇ –í–æ–∑—Ä–∞—Å—Ç:</span>
                    <span class="info-value">{{ user.age|default:"‚Äî" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üîó Telegram:</span>
                    <span class="info-value">
                        {% if user.telegram %}
                            {% if user.telegram|first == "@" %}
                                <a href="https://t.me/{{ user.telegram|slice:"1:" }}" target="_blank" class="profile-link">
                                    {{ user.telegram }}
                                </a>
                            {% else %}
                                <a href="https://t.me/{{ user.telegram }}" target="_blank" class="profile-link">
                                    @{{ user.telegram }}
                                </a>
                            {% endif %}
                        {% else %}
                            ‚Äî
                        {% endif %}
                    </span>
                </div>
                <div class="info-row">
                    <span class="info-label">üèôÔ∏è –ì–æ—Ä–æ–¥:</span>
                    <span class="info-value">{{ user.city|default:"‚Äî" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üíº –ë–∏–æ:</span>
                    <span class="info-value">{{ user.bio|default:"‚Äî" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üí∞ –ö—Ä–∏–ø—Ç–æ-–∫–æ—à–µ–ª—ë–∫:</span>
                    <span class="info-value">{{ user.crypto_wallet|default:"‚Äî" }}</span>
                </div>
            </div>
        </div>

        <div class="profile-actions">
            <!-- –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
            <a href="{% url 'projects:edit_profile' %}" class="btn btn-primary profile-edit-btn">
                –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
            </a>
            <!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è (–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è, —Å –∫—Ä–∞—Å–Ω–æ–π —Ä–∞–º–∫–æ–π) -->
            <button type="button" class="btn btn-outline-danger profile-delete-btn" onclick="confirmDelete()">
                –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
            </button>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="profile-sidebar">
            <div class="stat-card">
                <div class="stat-icon"></div>
                <div class="stat-content">
                    <h3 class="stat-title">–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ</h3>
                    <p class="stat-value">
                        {{ user.total_invested|default:0 }} USDT
                    </p>
                    <p class="stat-desc">–≤ {{ user.donations|length|default:0 }} –ø—Ä–æ–µ–∫—Ç{{ user.donations|length|default:0|pluralize:"–µ,–∞—Ö,–∞—Ö" }}</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon"></div>
                <div class="stat-content">
                    <h3 class="stat-title">–°–æ–∑–¥–∞–Ω–æ –ø—Ä–æ–µ–∫—Ç–æ–≤</h3>
                    <p class="stat-value">{{ user.projects|length|default:0 }}</p>
                    <p class="stat-desc">
                        {% if user.projects|length|default:0 == 1 %}
                            –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
                        {% elif user.projects|length|default:0 > 1 and user.projects|length|default:0 < 5 %}
                            –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞
                        {% else %}
                            –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="site-footer">
    <div class="footer-container">
        <div class="footer-brand">
            <img src="{% static 'Image/s.png' %}" alt="–õ–æ–≥–æ—Ç–∏–ø" class="footer-logo">
            <p class="footer-slogan">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–¥–µ–π –∏ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤</p>
        </div>

        <div class="footer-links">
            <div class="footer-column">
                <h3 class="footer-title">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</h3>
                <ul>
                    <li><a href="#welcome">–û –Ω–∞—Å</a></li>
                    <li><a href="#projects">–ü—Ä–æ–µ–∫—Ç—ã</a></li>
                    <li><a href="#">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3 class="footer-title">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</h3>
                <ul>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#faq">–ö–∞–∫ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç?</a></li>
                    <li><a href="#faq">–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç?</a></li>
                    <li><a href="#">–ë–ª–æ–≥</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3 class="footer-title">–°–æ—Ü—Å–µ—Ç–∏</h3>
                <ul>
                    <li><a href="https://t.me/drbshh" target="_blank">Telegram</a></li>
                    <li><a href="#">–í–ö–æ–Ω—Ç–∞–∫—Ç–µ</a></li>
                    <li><a href="#">Instagram</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <p>&copy; 2025 –ö—Ä–∞—É–¥—Ñ–∞–Ω–¥–∏–Ω–≥. –ë—É–¥—É—â–µ–µ. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </div>
</footer>

<script>
    function confirmDelete() {
        if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!')) {
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
            alert('–§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
        }
    }
    
    console.log("Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", "{{ user.email|default:'–Ω–µ —É–∫–∞–∑–∞–Ω' }}");
</script>

{% endblock %}